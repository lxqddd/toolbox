import{am as _,h as v,an as p,ao as g,a as C,r as V,o as $,ap as j,K as O,d as w,i as E,aq as H,ar as N,G as m,as as k,e as b,t as B,v as L,at as x,au as A}from"./CWvSmQcJ.js";const h=new WeakMap;function R(n){if(h.has(n))return h.get(n);const s={...n};return s.render?s.render=(c,a,f,o,l,r)=>{var u;if(o.mounted$??c.mounted$){const t=(u=n.render)==null?void 0:u.bind(c)(c,a,f,o,l,r);return t.children===null||typeof t.children=="string"?_(t):v(t)}else{const t=p(c._.vnode.el??null)??["<div></div>"];return g(t.join(""),t.length)}}:s.template&&(s.template=`
      <template v-if="mounted$">${n.template}</template>
      <template v-else><div></div></template>
    `),s.setup=(c,a)=>{var u;const f=C(),o=V(f.isHydrating===!1),l=O();if(f.isHydrating){const t={...l.attrs},i=D(l);for(const e in t)delete l.attrs[e];$(()=>{Object.assign(l.attrs,t),l.vnode.dirs=i})}$(()=>{o.value=!0});const r=((u=n.setup)==null?void 0:u.call(n,c,a))||{};return j(r)?Promise.resolve(r).then(t=>typeof t!="function"?(t=t||{},t.mounted$=o,t):(...i)=>{if(o.value||!f.isHydrating){const e=t(...i);return e.children===null||typeof e.children=="string"?_(e):v(e)}else{const e=p((l==null?void 0:l.vnode.el)??null)??["<div></div>"];return g(e.join(""),e.length)}}):typeof r=="function"?(...t)=>{if(o.value)return v(r(...t),a.attrs);const i=p((l==null?void 0:l.vnode.el)??null)??["<div></div>"];return g(i.join(""),i.length)}:Object.assign(r,{mounted$:o})},h.set(n,s),s}function D(n){if(!n||!n.vnode.dirs)return null;const s=n.vnode.dirs;return n.vnode.dirs=null,s}const q=w({__name:"MonacoEditor.client",props:{lang:{default:()=>"plaintext"},options:{default:()=>({})},modelValue:{default:()=>""}},emits:["update:modelValue","load"],setup(n,{expose:s,emit:c}){const a=n,f=c,o=V(!0),l=E(()=>a.lang||a.options.language),r=H(),u=V(),t=N(),i={automaticLayout:!0};let e,d;return m(()=>a.modelValue,()=>{(e==null?void 0:e.getValue())!==a.modelValue&&(e==null||e.setValue(a.modelValue))}),m(()=>a.lang,()=>{d&&d.dispose(),d=t.editor.createModel(a.modelValue,l.value),e==null||e.setModel(d)}),m(()=>a.options,()=>{e==null||e.updateOptions(k(a.options,i))}),m(u,(y,M)=>{!u.value||M||(e=t.editor.create(u.value,k(a.options,i)),d=t.editor.createModel(a.modelValue,l.value),r.value=e,e.layout(),e.setModel(d),e.onDidChangeModelContent(()=>{f("update:modelValue",e.getValue())}),o.value=!1,f("load",e))}),s({$editor:r}),b(()=>{e==null||e.dispose(),d==null||d.dispose()}),(y,M)=>(B(),L("div",{ref_key:"editorElement",ref:u},[o.value?x(y.$slots,"default",{key:0}):A("",!0)],512))}});export{q as _,R as c};
